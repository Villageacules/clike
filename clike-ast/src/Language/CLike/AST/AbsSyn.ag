-------------------------------------------------------------------------------------------
-- Position embedded in AST
-------------------------------------------------------------------------------------------

{-
DATA AllBaseNT
  | *                   pos             : Pos
-}

-------------------------------------------------------------------------------------------
-- Top level
-------------------------------------------------------------------------------------------

DATA AGItf
  | AGItf               module          : Module

DATA Module
  | Mod                 decls      		: DeclL

-------------------------------------------------------------------------------------------
-- Declarations (table, var, type)
-------------------------------------------------------------------------------------------

DATA Decl
  | None                  

TYPE DeclL	         	= [Decl]

SET AllDecl             = Decl DeclL

-------------------------------------------------------------------------------------------
-- Expression
-------------------------------------------------------------------------------------------

DATA Expr
  -- primary
  | This
  | Name				nm				: Name
  | Lit					lit				: Lit
  | Lam

  -- postfix
  | Index				expr			: Expr		-- postfix-expression [ expression ]
  						inx				: Expr

TYPE ExprL	         	= [Expr]

SET AllExpr             = Expr ExprL

-------------------------------------------------------------------------------------------
-- Literal, value is represented as string
-------------------------------------------------------------------------------------------

DATA Lit
  | Int					str				: String
  | Float				str				: String
  | Char				str				: String
  | String				str				: String

SET AllLit              = Lit

-------------------------------------------------------------------------------------------
-- Name (for a var)
-------------------------------------------------------------------------------------------

DATA Name
  | Id					id				: String		-- simple id

SET AllName             = Name

-------------------------------------------------------------------------------------------
-- All NT
-------------------------------------------------------------------------------------------

SET AllBaseNT           = AllDecl AllExpr AllLit AllName
